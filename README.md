# ESG-X-Stocks-optimization
Sustaibility is an increasingly growing concern for many companies globally. From mitigating waste to reducing CO2 emissions, both stakeholders and customers are not only concerned with value of the stocks they invest in but whether the company cares about sustainable practices.  

This project aims to provide a stock portfolio that optimizes for both returns and ESG scores (a metric representing a company's sustainability and ethical practices).  

Below highlights the steps I took to carry out this project as well as documenting some challenges and things i learnt. 

1. Using the Alpha Vantage API and yfinance python library I created a time series dataset showing close prices for the SP500 companies  in wide format.
     - However I soon changed this to long format as this allowed for more efficient model training as training a wide format dataset took a long time
2. I found an online ESG score dataset which had percentiles for the different companies in the SP500 i.e if esg_percentile = 0.54, then the specific company had a higher ESG score than 54% of the other companies in the SP500
     - Practices like Greenwashing can overinflate ESG scores however it is hard to find accessible data that is truly indicative of a company's environmental impact
4. Then I trained an ML model using LightGBM to forecast 1 year returns.
     - This part took quite a lot of trial and error as my data was initally in a bad (wide) format so i had to change that
     - I used an LSTM model but this wasn't very accurate and took a long time to train for almost 500 tickers
     - I saved the forecasted results to a csv file names forecasted_results
  
5. I then used Optimisation methods to optimise for returns subjects to contraints such as a minimum ESG rating.
     - I used the 'cvxpy' python library to do this
     - Initially i used dummy data generated by numpy to practise how to use this/ make the optimisation work
     - I also learnt to wrap the optimization code into a function so it could then be called for the streamlit app 
     - Inputs: predicted returns, latest prices, ESG scores, and historical monthly returns.
     - Outputs:  returns the optimized portfolio with weights, expected return, and average ESG score.
6. Finally, I used streamlit so there was a user interface that bundled the ML techniques , data and optimisation code into a friendly to use app

Extra things i learnt: 
  - I learnt to use print statement throughout the code so i could catch what was going wrong more easily
  - It's important to use try-except blocks where possible to avoid nasty errors
  - Before using the entire dataset on an ML model, trial it out with a subset of the data
  - use numpy to generate dummy data for quick practise and trials
  - 
   
